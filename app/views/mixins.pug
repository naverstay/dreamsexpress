block variables

- var use_slash = '/'; // '' for gulp build, '/' for node 
- var dev = locals ? !!locals['dev'] : false; // true for gulp, false for node
- var no_min = true;
- var scripts_in_head = true;
- var year = new Date();
//- no_min = false; // false for node production

- var all_products = locals ? locals['all_products'] : all_products;
- var user = locals ? locals['user'] : user;
    
//- dev = true; // true for gulp, false for node
    
- if (dev)
    - use_slash = '';
//    - var all_products = [];
//    - var user = {email: '123@321', data : []};

- function checkSlash(url) {return url.slice(0,1) == '/' ? url : '/' + url}
- function isHex(h) {return /(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(h.trim())}
- function formatPrice(s) {return ('' + s).replace(/(?!^)(?=(\d{3})+(?=\.|$))/gm, ' ')}
- function plural(n, str1, str2, str5, num) {return (num ? n + ' ': '') + ((((n % 10) == 1) && ((n % 100) != 11)) ? (str1) : (((((n % 10) >= 2) && ((n % 10) <= 4)) && (((n % 100) < 10) || ((n % 100) >= 20))) ? (str2) : (str5)));}

//- var head_menu = ['Новинки','Акции','Оплата','Доставка','О компании']
- var head_menu = ['Каталог','Новинки','Акции','Доставка и оплата','О компании']
- var head_menu_link = ['/catalog','/news','/lk','/delivery','/cart']
- var aside_menu = ['Детская одежда','Детская обувь','Игрушки','Коляски','Детские товары','Мамам','Автокресла']
- var aside_menu_icon = ['baby-onesie-with-front-pocket-outline','baby-shoes','bear-toy','baby-transport-side-view','baby-diaper-outline','baby-onesie-outline','baby-chair']
    
- var sub_menu = ['Все категории','Платья ','Комплекты одежды','Верхняя одежда','Нижнее белье','Одежда для сна','Распродажа']
    
mixin dev_head(page_title, index, news, search, product, lk, cart, add)
    head
        meta(charset="utf-8")
        title= (title || "") + " " + page_title
        | 
        | <!-- saved from url=(0014)about:internet -->
        - if (page_description)
            meta(name="description", content= page_description)
        - if (page_keywords)
            meta(name="keywords", content= page_keywords)
        //-meta(http-equiv="content-language" content="ru")
        meta(name="viewport", content="width=device-width, initial-scale=1.0")
        meta(name="SKYPE_TOOLBAR", content="SKYPE_TOOLBAR_PARSER_COMPATIBLE")
        meta(name="apple-mobile-web-app-capable", content="yes")
        meta(name="format-detection", content="telephone=no")
        
        meta(property="og:title" content= (title || "") + " " + page_title)
        
        - if (no_min)
            | 
            | <!--build:css css/styles.min.css-->
            link(rel='stylesheet', href= use_slash + (!dev ? 'css/main_global.css' : 'css/styles.min.css'), media='all')
            | 
            | <!--endbuild-->
        - else
            //-link(rel='stylesheet', href= use_slash + 'css/styles.min.css', media='all')
            
            link(rel='stylesheet', href= use_slash + (!dev ? 'css/main_global.css' : 'css/styles.min.css'), media='all')
            
        link(href='//fonts.googleapis.com/css?family=Rubik:300,400,500,700', rel='stylesheet', type='text/css')
        
        - if (scripts_in_head)
            - if (no_min)
                | 
                | <!--build:js js/main.min.js -->
                script(src= use_slash + 'js/lib/jquery-1.12.1.min.js')
                script(src= use_slash + 'js/lib/jquery-ui-1.11.4.js')
                script(src= use_slash + 'js/lib/jquery.mousewheel.min.js')
                script(src= use_slash + 'js/lib/slick.js')
                script(src= use_slash + 'js/lib/jquery.validationEngine.js')
                script(src= use_slash + 'js/lib/jquery.validationEngine-ru.js')
                script(src= use_slash + 'js/lib/select2.js')
                script(src= use_slash + 'js/lib/jquery.mCustomScrollbar.min.js')
                script(src= use_slash + 'js/lib/jquery.inputmask.bundle.js')
                    
                script(src= use_slash + 'js/lib/colorpicker.js')
                //-script(src= use_slash + 'js/lib/eye.js')
                //-script(src= use_slash + 'js/lib/utils.js')
                    
                script(src= use_slash + 'js/main.js')
                | 
                | <!--endbuild-->
            - else
                script(src= use_slash + 'js/main.min.js')
            
            - if (index)
                - if (no_min)
                    | 
                    | <!--build:js js/index.min.js -->
                    script(src= use_slash + 'js/index.js')
                    | 
                    | <!--endbuild-->
                - else
                    script(src= use_slash + 'js/index.min.js')
            - if (news)
                - if (no_min)
                    | 
                    | <!--build:js js/news.min.js -->
                    script(src= use_slash + 'js/lib/imagesloaded.pkgd.min.js')
                    script(src= use_slash + 'js/lib/isotope.pkgd.min.js')
                    script(src= use_slash + 'js/lib/packery-mode.pkgd.js')
                    script(src= use_slash + 'js/news.js')
                    | 
                    | <!--endbuild-->
                - else
                    script(src= use_slash + 'js/news.min.js')
        
            - if (search)
                //-link(href='//cdnjs.cloudflare.com/ajax/libs/fotorama/4.6.4/fotorama.css' rel="stylesheet")
                //-script(src='//cdnjs.cloudflare.com/ajax/libs/fotorama/4.6.4/fotorama.js')
                - if (no_min)
                    | 
                    | <!--build:js js/search.min.js -->
                    script(src= use_slash + 'js/lib/nouislider.min.js')
                    script(src= use_slash + 'js/lib/fotorama.js')
                    script(src= use_slash + 'js/search.js')
                    | 
                    | <!--endbuild-->
                - else
                    script(src= use_slash + 'js/search.min.js')
        
            //- if (lk)
                 - if (no_min)
                    | 
                    | <!--build:js js/lk.min.js -->
                    script(src= use_slash 'js/lk.js')
                    | 
                    | <!--endbuild-->
                 - else
                    script(src= use_slash 'js/lk.min.js')
        
            - if (cart)
                - if (no_min)
                    | 
                    | <!--build:js js/cart.min.js -->
                    script(src= use_slash + 'js/lib/jquery.inputmask.bundle.js')
                    script(src= use_slash + 'js/cart.js')
                    | 
                    | <!--endbuild-->
                - else
                    script(src= use_slash + 'js/cart.min.js')
                
            - if (add)
                - if (no_min)
                    | 
                    | <!--build:js js/add.min.js -->
                    script(src= use_slash + 'js/add.js')
                    | 
                    | <!--endbuild-->
                - else
                    script(src= use_slash + 'js/add.min.js')
        
mixin loop_while(counter)
    -i=0;
    while i < counter
        -i++;
        block

mixin product_item(old_price)
    .product_item
        a.product_img(href='product_' + (dev ? '.html' : ''))
            img(src= use_slash + 'images/dress_1.jpg')
            .hover_img.prod_hover
                img(src= use_slash + 'images/hover_1.jpg')
            .product_hit Хит продаж
            .product_share_holder
                span.prod_hover.prod_fav.favBtn(data-id='')
                .product_share - 30%
            .product_q_review.violette_btn.prod_hover.openReview.mob_hidden Быстрый просмотр
        h3.product_caption Трикотажное платье  <br> с рисунком
        .product_price
            - if (old_price)
                span.old_price 8449
                    span._cur  грн.
            span.new_price 4069
                span._cur  грн.
        
        .product_item_overview.prod_hover
            p Цвета и размеры в наличии
            ul.prod_colors
                li
                    .prod_color
                        img(src= use_slash + 'images/color_1.png')
                li
                    .prod_color
                        img(src= use_slash + 'images/color_2.png')
                li
                    .prod_color
                        img(src= use_slash + 'images/color_3.png')
                li
                    .prod_color
                        img(src= use_slash + 'images/color_4.png')
            .prod_sizes xs, s, m, xxl, xxxl
        
mixin header(active)
    noscript
        input#js_needed.inp_hidden(type='checkbox')
        label(for='js_needed').js_needed 
            span Включите javascript

    - if (!dev)
        div.dev_log
            - if (product)
                p= product.name + '  ' + product.url
            - if (fav_html)
                p= fav_html.length
            p= title
            
            - if (user)
                p= user
                p= user.length || '#'
                for item, i in user 
                    p
                        span= i
                        |  :  
                        span= item
        
    div.header
        a.mob_menu_btn.openMobMenu(href='#')
        a.mob_search_btn.quickSearchBtn(href='#')
            span.i-baby-rattle.aside_m_icon
        .section_inner
            .callback_block
                .callback_inner
                    .callback_time пн-пт: 9:00-22:00
                    a.callback_btn.callbackBtn(href='#') (812) 505-10-41
                    //-.callback_phone.select_box_v1
                        select.select2
                            option (812) 505-10-41
                            option (812) 505-10-42
                            option (812) 505-10-43

mixin footer()
    .footer
        .section_inner
            ul.main_menu.mob_hidden
                for item, i in head_menu
                    li
                        - if (i == active)
                            span.menu_link.menu_active: span=item
                        - else
                            a.menu_link(href=  head_menu_link[i] + (dev ? '.html' : '')): span=item
                    
            ul.footer_info
                li
                    .footer_info_unit
                        dl.contacts_list
                            dt Контактная информация
                            dd (812) 505-10-41  <br> 
                                span d
                                span r
                                span e
                                span a
                                span m
                                span s
                                span e
                                span x
                                span p
                                span r
                                span e
                                span s
                                span s
                                span .
                                span b
                                span i
                                span z
                                span @
                                span g
                                span m
                                span a
                                span i
                                span l
                                span .
                                span c
                                span o
                                span m
                                
                        .footer_info_control
                            a.gl_link(href='#') Заказать звонок
                            
                li
                    .footer_info_unit
                        dl.contacts_list
                            dt Режим работы
                            dd Будни с 9:00 до 22:00 <br> 
                                | Выходные с 10:00 до 18:00 <br> 
                                | Доставка с 12:00 до 20:00
                            
                            //-p.fz_13.fw_500
                                a.gl_link(href='#') Посмотреть на карте
                                
                //-li
                    .footer_info_unit
                        dl.contacts_list
                            dt адрес
                            dd г. Санкт-Петербург, <br> 
                                | ул. Правды, 1, ТЦ «Галерея»
                                
                        .footer_info_control
                            a.gl_link(href='#') Посмотреть на карте
                            
                //-li
                    .footer_info_unit
                        dl.contacts_list
                            dt Мы в соцсетях
                            dd
                                ul.about_list
                                    li
                                        a.about_link(href='#')
                                            span.i-v
                                    li
                                        a.about_link(href='#')
                                            span.i-f
                                    li
                                        a.about_link(href='#')
                                            span.i-t
                                    //-li
                                        a.about_link(href='#')
                                            span.i-o
                                    //-li
                                        a.about_link(href='#')
                                            span.i-g
                                
                    
            .copyright_block
                .copyright
                    | &copy;  
                    span= year.getFullYear()
                    |  dreamsexpress.biz, Все права защищены.
                .payments
                    img(src= use_slash + 'images/pay_icons.png')
                    
mixin aside_right()
    - if (user && user.email)
        .aside_right
            ul.user_menu
                li.mob_hidden
                    a.user_m_link.openFailPopup(href='#')
                        span.user_m_icon.i-baby-abacus-toy
                li
                    a.user_m_link.openFav(href='#' title='Избранное')
                        span.user_m_icon.i-star-rounded
                        span.user_m_counter.favCounter #{fav_html ? fav_html.length : 0}
                li
                    a.user_m_link.cartLink(href='/cart' title='Корзина')
                        span.user_m_icon.i-cart
                        span.user_m_counter 6
                        
        .gl_overlay
        .fav_container.favContainer(class= (fav_html && fav_html.length > 0 ? '' : '_empty'))
            .fav_caption
                span Вам понравилось (#[span.favCounter #{fav_html ? fav_html.length : 0}])
            .fav_close_btn.openFav
    
            .fav_list.mCSB
                //- comment for gulp
                - if (fav_html)
                    for item, i in fav_html
                        .favUnit.fav_unit
                            .product_item
                                a.product_img(href= use_slash + 'product/' + item.url + (dev ? '.html' : ''))
                                    img(src= checkSlash(item.main_img))
                                .prod_rm_btn.rmFavBtn(data-id= item._id)
                                h3.product_caption= item.name
                                .product_price
                                    span.new_price= item.price
                                        span._cur  грн.
                    
                //- +loop_while(4)
                    .favUnit.fav_unit
                        .product_item
                            a.product_img(href='product' + (dev ? '.html' : ''))
                                img(src= use_slash + 'images/fav_1.jpg')
                            .prod_rm_btn.rmFavBtn(data-id='')
                            h3.product_caption Трикотажное платье с рисунком
                            .product_price
                                span.new_price 4069
                                    span._cur  грн.
                    .favUnit.fav_unit
                        .product_item
                            a.product_img(href='product' + (dev ? '.html' : ''))
                                img(src= use_slash + 'images/fav_1.jpg')
                            .prod_rm_btn.rmFavBtn(data-id='')
                            h3.product_caption длинное название Трикотажного  <br>  платья с рисунком
                            .product_price
                                span.new_price 2000
                                    span._cur  грн.
                                
                .favUnitMarker
                                    
            a.btn_v1.fav_btn.light_blue_btn.clearFavBtn(href='#') Очистить список
        
mixin aside_left(no_auth)
    .aside_left.mCSBaside
        .aside_menu_holder
            //-ul.aside_menu.search_menu
                li.bdr_mod
                    form.search_block.search_aside.aside_m_link(action='#')
                        .aside_m_text: span
                            input.f_input.input_v1(placeholder='Найти товар')
                        button.search_btn.aside_m_icon.i-baby-rattle
                
            .aside_menu_scroller.mCSB
                ul.aside_menu.nav
                    li.menuItem.bdr_mod.mob_hidden
                        a.search_block.search_aside.aside_m_link.quickSearchBtn(href='#')
                            span.aside_m_text
                                span Найти товар
                            span.aside_m_icon.i-baby-rattle
                    for item, i in aside_menu
                        li.menuItem(class= i == 0 ? "bdr_mod" : "")
                            a.aside_m_link(href='#')
                                span.aside_m_text: span=item
                                span.submenu_icon
                                span.aside_m_icon(class='i-' + aside_menu_icon[i])
                            +aside_submenu(i, item)
                        
                ul.aside_menu.contacts
                    li.bdr_mod.menuItem
                        a.aside_m_link(href='#')
                            span.aside_m_text: span Контакты
                            span.submenu_icon
                            span.aside_m_icon(class='i-location')
                        +aside_submenu(7, 'Контакты')
                
        ul.main_menu
            - if (user && (user.role == 'admin' || user.role == 'admin_g'))
                li
                    a.menu_link(href='/orders' + (dev ? '.html' : '')): span Заказы
                
                li
                    a.menu_link(href='/add_product' + (dev ? '.html' : '')): span Товары
                
            for item, i in head_menu
                li
                    - if (i == active)
                        span.menu_link.menu_active: span=item
                    - else
                        a.menu_link(href=head_menu_link[i]): span=item

        - if (!no_auth)
            ul.auth_menu
                - if (user)
                    li#user_lk
                        a.menu_link(href='/lk')
                            span= user.email
            
                li
                    a.menu_link.authBtn.text_upper(href='#' class= ((user && user.email) ? 'user' : ''))
                        span.un_authenticated Войти
                        span.authenticated Выйти
                
    .logo_block.header_logo: a.logo(href= (dev ? 'index.html' : '/'))
        img(src= use_slash + 'images/logo.svg')

mixin aside_submenu(ind, title)
    
    .submenu_holder.mCSB
        case ind
            when 7
                .submenu_inner
                    .submenu_block
                        .subcaption.fz_18.fw_700.text_upper.mob_hidden=title
                        .phone.fz_16.fw_500 (812) 505-10-41
                        p.fz_13.fw_500
                            a.gl_link(href='#') Заказать звонок
                        
                        p email@gmail.com
                        
                        dl.contacts_list
                            dt Режим работы
                            dd Будни с 9:00 до 22:00 <br> 
                                | Выходные с 10:00 до 18:00 <br> 
                                | Доставка с 12:00 до 20:00
                            
                            dt адрес
                            dd г. Санкт-Петербург, <br> 
                                | ул. Правды, 1, ТЦ «Галерея»
        
                            p.fz_13.fw_500
                                a.gl_link(href='#') Посмотреть на карте
        
            default
                .submenu_w
                    .submenu_inner.mob_hidden
                        .subcaption.fz_18.fw_700.text_upper=title
                        p Мы отобрали лучшую детскую одежду для ваших детей
                    ul.submenu_list
                        for item, i in sub_menu
                            li(class= i == 0 ? "dt_hidden" : "")
                                a.aside_m_link.submenu_link(href='#')
                                    span.aside_m_text: span=item + ' ' + ind
                                    span.aside_m_icon(class='i-' + aside_menu_icon[i])
                        for item, i in sub_menu
                            li(class= i == 0 ? "dt_hidden" : "")
                                a.aside_m_link.submenu_link(href='#')
                                    span.aside_m_text: span=item + ' ' + ind
                                    span.aside_m_icon(class='i-' + aside_menu_icon[i])
                        li.mob_hidden
                            a.aside_m_link.submenu_link(href='#')
                                span.aside_m_text.show_more Показать все категории (3)
                    .submenu_tag_block.mob_hidden
                        p По брендам:
                        ul.submenu_tags
                            li: a.gl_link(href='#') Zara
                            li: a.gl_link(href='#') H&M
                            li: a.gl_link(href='#') Okaidi
                            li: a.gl_link(href='#') Puma
                            li: a.gl_link(href='#') Nike
                            li: a.gl_link(href='#') Mothercare
                            li: a.gl_link(href='#') Addidas
                            li: a.gl_link(href='#') Reebok
                        
                    //-for item, i in sub_menu
                        li
                            a.submenu_link(href='#')
                                span=item
                    
mixin main_slider()
    .main_slider.mainSlider
        +loop_while(4)
            .slide
                img(src= use_slash + 'images/slide_1.jpg')
                .slide_description
                    p В нашем магазине действует акция -30% 
                        span.mob_hidden <br> 
                        | на новую коллекцию. Только до конца апреля.
                        span.mob_hidden <br>
                        |  Ждем ваших заказов
            
        .slide_prev.mob_hidden
        .slide_next.mob_hidden
                            
mixin hit_slider(items)
    .hitSlider.hit_slider_holder(data-all= all_products ? all_products.length : 0)
        .hit_slider
            - if (items && items.length)
                for item, i in items
                    .slide
                        a.product_img(href='/product/' + item._id)
                            img(src=item.main_img)
                            .product_hit Хит продаж
                            .product_share_holder
                                - if (item.share)
                                    .product_share= item.share
                        h3.product_caption= item.name
                        .product_price
                            - if (item.old_price)
                                span.old_price= formatPrice(item.old_price)
                                    span._cur  грн.
                            span.new_price= formatPrice(item.price)
                                span._cur  грн.
                                
            - else
                +loop_while(6)
                    .slide
                        a.product_img(href='product' + (dev ? '.html' : ''))
                            img(src= use_slash + 'images/hit_1.jpg')
                            .product_hit Хит продаж
                            .product_share_holder: .product_share - 30%
                        h3.product_caption Трикотажное платье с рисунком
                        .product_price
                            span.old_price 8449
                                span._cur  грн.
                            span.new_price 4069
                                span._cur  грн.
                    .slide
                        a.product_img(href='product' + (dev ? '.html' : ''))
                            img(src= use_slash + 'images/hit_1.jpg')
                            .product_hit Хит продаж
                            .product_share_holder: .product_share - 30%
                        h3.product_caption Трикотажное платье с рисунком
                        .product_price
                            span.new_price 4069
                                span._cur  грн.
                                
        .slide_prev
        .slide_next

mixin pop_slider()
    .popSlider.hit_slider_holder
        .hit_slider.slide_middle
            +loop_while(3)
                .slide
                    a.product_img(href='product' + (dev ? '.html' : ''))
                        img(src= use_slash + 'images/brand_1.png')
                .slide
                    a.product_img(href='product' + (dev ? '.html' : ''))
                        img(src= use_slash + 'images/brand_2.png')
                .slide
                    a.product_img(href='product' + (dev ? '.html' : ''))
                        img(src= use_slash + 'images/brand_3.png')
                .slide
                    a.product_img(href='product' + (dev ? '.html' : ''))
                        img(src= use_slash + 'images/brand_4.png')
                .slide
                    a.product_img(href='product' + (dev ? '.html' : ''))
                        img(src= use_slash + 'images/brand_5.png')
                .slide
                    a.product_img(href='product' + (dev ? '.html' : ''))
                        img(src= use_slash + 'images/brand_6.png')
    
        .slide_prev
        .slide_next
        
mixin breadcrumbs(bc)
    - if (bc && bc.length == 1)
        ul.breadcrumbs
            - var list= bc[0]
            for item, i in list
                li.breadcrumb_item
                    - if (i == list.length - 1)
                        span= item
                    - else
                        a.gl_link(href= use_slash + (item == 'Главная' ? (dev ? 'index.html' : '') : (item == 'Каталог' ? 'catalog' + (dev ? '.html' : '') : 'products' + (dev ? '.html' : ''))))= item
            
    - if (bc && bc.length == 2)
        ul.breadcrumbs
            - var list= bc[0]
            - var link= bc[1]
            for item, i in list
                li.breadcrumb_item
                    - if (i == list.length - 1)
                        span= item
                    - else
                        a.gl_link(href= link[i])= item
            
mixin dropdown_w(caption)
    .dropdown_w
        .dropdown_caption=caption
        block
        
        ul.dropdown_controls.form_cell
            li
                a.btn_v1.blue_btn.apply_btn.catApply(href='#') Ok
            li 
                a.gl_link.catReset.blue_link(href='#') Сбросить
            
mixin cart_unit_controls()
    ul.cart_unit_controls
        li
            span.cart_control Сумма:
        li.cart_unit_quantity
            .cart_quantity_control.val_cell
                input.val.f_input.input_v1(value=1 data-inputmask="'alias': 'numeric'")
                .val_btn.minus.disabled -
                .val_btn.plus +
        li
            .cart_unit_price 
                span 1200 
                span._cur  грн.
                
        li.cart_unit_rm
            a.gl_link(href='#') Удалить

mixin prod_review_info(product_page)
    .prod_review_info: form.validateMe.qBuyForm(action='/one_click_buy' method='POST')
        .product_share_holder: .product_share - 30%
        .prod_review_cart
            - if (product)
                .product_price
                    span.new_price= formatPrice(product.price)
                        span._cur  грн.
                    - if (product.old_price)
                        span.old_price= formatPrice(product.old_price)
                            span._cur  грн.

            .prod_review_controls_w
                ul.prod_review_controls
                    li
                        a.btn_v1.blue_btn.cart_btn.addToCart(href='#') В корзину
                    li
                        a.btn_v1.violette_btn_transp.cart_btn.toggleOneClick(href='#') Купить в 1 клик
                    li.product_fav
                        - is_fav = false
                        - if (user && user.fav && user.fav.length)
                            each item in user.fav
                                - is_fav = is_fav || (product ? product._id == item : false)
                        a.prod_fav.favBtn(href='#' data-id= (product ? product._id : '') class=(is_fav ? ' favorite' : ''))

                .prod_review_1_click.oneClickForm
                    .form_cell
                        input.f_input.input_v5(placeholder='Имя' name='q_name' value= (user ? user.first_name || '' : ''))
                    .form_cell
                        input.f_input.input_v5(placeholder='телефон' data-inputmask="'mask': '[+38] (099)-999-99-99', 'clearIncomplete' : true" class='validate[required]' name='q_phone' value= (user ? user.phone || '' : ''))

                    ul.dropdown_controls
                        li
                            button.btn_v1.blue_btn.apply_btn() Купить
                        li
                            a.gl_link.white_link.toggleOneClick(href='#') Отменить
            
        .prod_review_options(class= product_page ? 'prodReviewOptions' : '')
            input.inp_hidden.prodID(value= (product ? product._id : '') name='prod_id')
            //- if (product_page)  // stars
                ul.prod_rating_list
                    +loop_while(3)
                        li
                            span.prod_rating.active
                    +loop_while(2)
                        li
                            span.prod_rating
                    li (5)
    
            - if (product && product.colors && product.colors.length)
                dl.prod_options
                    dt Цвет: 
                    dd &nbsp;

                ul.prod_options_switch
                    //-li
                        label.option_switch.round
                            input.inp_hidden(type='radio' name='prod_color')
                            span.check_text
                                img(src= use_slash + 'images/color_1_big.png')
    
                    - var arr = product.colors.split(',');
                    for item, i in arr
                        - var clr = item.trim();
                        li
                            label.option_switch.round
                                input.inp_hidden(type='radio' value= clr name='prod_color')
                                span.check_text
                                    - if (isHex(clr))
                                        span.check_color(style='background:' + clr)
                                    - else
                                        img(src= checkSlash(clr))
                
            - if (product && product.sizes && product.sizes.length)
                dl.prod_options
                    dt Размер: 
                    dd &nbsp;
    
                ul.prod_options_switch
                    - var arr = product.sizes.split(',');
                    for item, i in arr
                        li
                            label.option_switch
                                input.inp_hidden(type='radio' value= item name='prod_size')
                                span.check_text
                                    span= item

                //-li
                    label.option_switch
                        input.inp_hidden(type='radio' name='prod_size')
                        span.check_text: span xs
                //-li
                    label.option_switch
                        input.inp_hidden(type='radio' name='prod_size')
                        span.check_text: span s
                //-li
                    label.option_switch
                        input.inp_hidden(type='radio' name='prod_size' disabled)
                        span.check_text: span m
                //-li
                    label.option_switch
                        input.inp_hidden(type='radio' name='prod_size')
                        span.check_text: span l
                //-li
                    label.option_switch
                        input.inp_hidden(type='radio' name='prod_size')
                        span.check_text: span xl
                //-li
                    label.option_switch
                        input.inp_hidden(type='radio' name='prod_size' disabled)
                        span.check_text: span xxl
                        
            - if (product_page)
                dl.prod_options
                    dt Артикул: 
                    dd= product.product_code
                
                .prod_footer_info
                    - if (product.in_stock)
                        .prod_f_inf
                            span.prod_f_icon.in_stock
                            span Товар в наличии
                        .prod_f_inf.delivery
                            span.prod_f_icon.i-truck-side-view-outline
                            span Срок отправки 1-2 дня
                    - else
                        .prod_f_inf
                            span.prod_f_icon.expected
                            span Товар ожидается
                        .prod_f_inf.delivery
                            span.prod_f_icon.i-truck-side-view-outline
                            span Срок поставки 2-3 дня
                
            - if (!product_page)
                p Мужские джинсы PlanB, выполненные из плотного денима на основе хлопка. Традиционный силуэт, прямой крой и средняя посадка. 
                
                .footer_info_control
                    a.gl_link.prod_link(href='product' + (dev ? '.html' : '')) На страницу товара
                
mixin order_info(count)
    .orderExpandRow(style='display:none;')
        +loop_while(count)
            .order_row.collapsed
                .order_cell.col_1_w
                    .order_product
                        a.order_img(href='product' + (dev ? '.html' : ''))
                            img(src= use_slash + 'images/cart_1.jpg')
                        .order_cell
                            .cell_val
                                a.order_name(href='product' + (dev ? '.html' : '')) Трикотажное платье с рисунком
                            
                .order_cell.col_2_w
                    .cell_val.fw_500 10 шт
                .order_cell.col_3_w
                    .cell_val
                        span 40 069 
                        span._cur  грн.
                    
        .order_row.collapsed
            .order_cell.col_1_w &nbsp;
            .order_cell.col_2_w
                .cell_val.fw_500 ИТОГО
            .order_cell.col_3_w 
                .cell_val
                    span 120 069 
                    span._cur  грн.

mixin filter_form(search)
    ul#cabinet_switcher.tab_holder.tab_v3
        li.tab_cell: a.tab_link(href='#filter_tab_1'): span Взрослые
        li.tab_cell: a.tab_link(href='#filter_tab_2'): span Детские

    .tabBlock(data-tab-context='#cabinet_switcher')
        #filter_tab_1
            form.filterForm(action='/filter' method='POST')
                input.inp_hidden.tabActive(type='radio' name='adult' value='true' checked)
                - if (search)
                    .q_search_block
                        input.f_input.input_v3.filterInput(placeholder='Название товара' name='name')
                        button.search_btn.aside_m_icon.i-baby-rattle
            
                .search_result_info
                    span.filterCounterTxt &nbsp;
                    span.fw_500.filterCounter &nbsp;
                    //-span , уточните категорию
                    
                ul.search_filters
                    li
                        label.filter_check
                            input.inp_hidden(type='checkbox')
                            span.check_btn
                                span.check_icon.i-baby-wrapped-in-swaddle
                                span.check_text Верхняя одежда (23)
                    li
                        label.filter_check
                            input.inp_hidden(type='checkbox')
                            span.check_btn
                                span.check_icon.i-baby-wrapped-in-swaddle
                                span.check_text Верхняя одежда (23)
                    li
                        label.filter_check
                            input.inp_hidden(type='checkbox')
                            span.check_btn
                                span.check_text платья (121)
                    li
                        label.filter_check
                            input.inp_hidden(type='checkbox')
                            span.check_btn
                                span.check_icon.i-baby-wrapped-in-swaddle
                                span.check_text Верхняя одежда (23)
                            
                ul.search_categories
                    li
                        .dropdown_holder.catParameter
                            .dropdown_btn.dropdownBtn
                                .dropdown_reset.catReset
                                .dropdown_caption Пол
                                .dropdown_val: span.catVal=gender[0]
                            +dropdown_w('Пол')
                                ul.cat_list.catList(data-default=gender[0])
                                    for item, i in gender
                                        - if (i > 0)
                                            li
                                                label.check_emul.check_v1
                                                    input.inp_hidden(type='checkbox' name=('gender') value= ['', 'f', 'm'][i])
                                                    span.check_text= ['', 'Женщины', 'Мужчины'][i]
        
                    //-li
                        .dropdown_holder.catParameter
                            .dropdown_btn.dropdownBtn
                                .dropdown_reset.catReset
                                .dropdown_caption Возраст
                                .dropdown_val: span.catVal=age[0]
                            +dropdown_w('Возраст')
                                ul.cat_list.catList(data-default=age[0])
                                    for item, i in age
                                        - if (i > 0)
                                            li
                                                label.check_emul.check_v1
                                                    input.inp_hidden(type='checkbox' name=('age') value= item)
                                                    span.check_text= plural(item, 'год', 'года', 'лет', true)
        
                    //-li
                        .dropdown_holder.catParameter.active
                            .dropdown_btn.dropdownBtn
                                .dropdown_reset.catReset
                                .dropdown_caption Бренд
                                .dropdown_val: span.catVal=brands[0]
                            +dropdown_w('Бренд')
                                ul.cat_list.catList(data-default=brands[0])
                                    for item, i in brands
                                        - if (i > 0)
                                            li
                                                label.check_emul.check_v1
                                                    input.inp_hidden(type='checkbox')
                                                    span.check_text=item
        
                    li
                        .dropdown_holder.catParameter
                            .dropdown_btn.dropdownBtn
                                .dropdown_reset.catReset
                                .dropdown_caption Размер
                                .dropdown_val: span.catVal=sizes[0]
                            +dropdown_w('Размер')
                                ul.cat_list.catList(data-default=sizes[0])
                                    for item, i in sizes
                                        - if (i > 0)
                                            li
                                                label.check_emul.check_v1
                                                    input.inp_hidden(type='checkbox' name=('size') value= item)
                                                    span.check_text=item
        
                    li
                        .dropdown_holder.catParameter
                            .dropdown_btn.dropdownBtn
                                .dropdown_reset.catReset
                                .dropdown_caption Сезон
                                .dropdown_val: span.catVal=seasons[0]
                            +dropdown_w('Сезон')
                                ul.cat_list.catList(data-default=seasons[0])
                                    for item, i in seasons
                                        - if (i > 0)
                                            li
                                                label.check_emul.check_v1
                                                    input.inp_hidden(type='checkbox' name=('season') value= ['', 's', 'w', 'd'][i])
                                                    span.check_text=item

                    li
                        .dropdown_holder.catParameter
                            .dropdown_btn.dropdownBtn
                                .dropdown_reset.catReset
                                .dropdown_caption Цена
                                .dropdown_val: span.catVal Любая
                            .dropdown_w
                                .dropdown_caption 
                                    span Цена 
                                    span._cur  грн.
                                .cat_list.catList(data-default='Любая')
                                    ul.price_toddler_vals
                                        li
                                            .input_w: input.filterMin.f_input.input_v4(data-name='price_min' data-inputmask="'alias': 'decimal', 'groupSeparator': ' ', 'digitsOptional': true, 'autoGroup': true, 'prefix' : 'от ', 'suffix': ' ₴' ")
                                        li
                                            .input_w: input.filterMax.f_input.input_v4(data-name='price_max' data-inputmask="'alias': 'decimal', 'groupSeparator': ' ', 'digitsOptional': true, 'autoGroup': true, 'prefix' : 'до ', 'suffix': ' ₴' ")
                                    
                                    .toddler_v1.price_toddler_holder
                                        .priceToddler.price_toddler(data-toddler-min='0' data-toddler-max='50000')
        
                                ul.dropdown_controls.form_cell
                                    li
                                        a.btn_v1.blue_btn.apply_btn.catApply(href='#') Ok
                                    li
                                        a.gl_link.catReset.blue_link(href='#') Сбросить
        
                    //-li
                        .dropdown_holder.catParameter.dropdown_w_right
                            .dropdown_btn.dropdownBtn
                                .dropdown_reset.catReset
                                .dropdown_caption Цвет
                                .dropdown_val: span.catVal=colors[0]
                            +dropdown_w('Цвет')
                                ul.cat_list.catList(data-default=colors[0])
                                    for item, i in colors
                                        - if (i > 0)
                                            li
                                                label.check_emul.check_v1
                                                    input.inp_hidden(type='checkbox')
                                                    span.check_text=item
        
                ul.search_sort
                    li
                        label.check_v2.check_emul
                            input.inp_hidden.updateFilter(type='checkbox' name='in_stock')
                            span.check_text в наличии
                    li
                        label.check_v2.check_emul
                            input.inp_hidden.updateFilter(type='checkbox' name='is_hit')
                            span.check_text хит
                    li
                        span.fz_12 Сортировать по:
                        
                    li
                        input#price_sort_2.inp_hidden(type='text' name='price_desc' value='desc')
                        span.btn_v2.sort_btn.active.sortBtn(data-target='#price_sort_2')
                            span цене
                            span.i-sort-desc.sort_icon
        
                    //-li
                        a.btn_v2.sort_btn(href='#') скидке
                        
                    //-li
                        a.btn_v2.sort_btn(href='#') популярности
            
                .search_result_info
                    //-p.cool_text Показано 3 товара

                ul.q_search_results.filterResults
                    //-+loop_while(2)
                        li
                            +product_item(true)
                        li
                            +product_item(false)
                        
        #filter_tab_2(style='display:none')
            form.filterForm(action='/filter' method='POST')
                input.inp_hidden.tabActive(type='radio' name='adult' value='false')
                - if (search)
                    .q_search_block
                        input.f_input.input_v3.filterInput(placeholder='Название товара' name='name')
                        button.search_btn.aside_m_icon.i-baby-rattle
            
                .search_result_info
                    span.filterCounterTxt &nbsp;
                    span.fw_500.filterCounter &nbsp;
                    //-span , уточните категорию
                    
                ul.search_filters
                    li
                        label.filter_check
                            input.inp_hidden(type='checkbox')
                            span.check_btn
                                span.check_icon.i-baby-wrapped-in-swaddle
                                span.check_text Верхняя одежда (23)
                    li
                        label.filter_check
                            input.inp_hidden(type='checkbox')
                            span.check_btn
                                span.check_icon.i-baby-wrapped-in-swaddle
                                span.check_text Верхняя одежда (23)
                    li
                        label.filter_check
                            input.inp_hidden(type='checkbox')
                            span.check_btn
                                span.check_text платья (121)
                    li
                        label.filter_check
                            input.inp_hidden(type='checkbox')
                            span.check_btn
                                span.check_icon.i-baby-wrapped-in-swaddle
                                span.check_text Верхняя одежда (23)
                            
                ul.search_categories
                    li
                        .dropdown_holder.catParameter
                            .dropdown_btn.dropdownBtn
                                .dropdown_reset.catReset
                                .dropdown_caption Пол
                                .dropdown_val: span.catVal=gender[0]
                            +dropdown_w('Пол')
                                ul.cat_list.catList(data-default=gender[0])
                                    for item, i in gender
                                        - if (i > 0)
                                            li
                                                label.check_emul.check_v1
                                                    input.inp_hidden(type='checkbox' name=('gender') value= ['', 'f', 'm'][i])
                                                    span.check_text=item
        
                    //-li
                        .dropdown_holder.catParameter
                            .dropdown_btn.dropdownBtn
                                .dropdown_reset.catReset
                                .dropdown_caption Возраст
                                .dropdown_val: span.catVal=age[0]
                            +dropdown_w('Возраст')
                                ul.cat_list.catList(data-default=age[0])
                                    for item, i in age
                                        - if (i > 0)
                                            li
                                                label.check_emul.check_v1
                                                    input.inp_hidden(type='checkbox' name=('age') value= item)
                                                    span.check_text= plural(item, 'год', 'года', 'лет', true)
        
                    //-li
                        .dropdown_holder.catParameter.active
                            .dropdown_btn.dropdownBtn
                                .dropdown_reset.catReset
                                .dropdown_caption Бренд
                                .dropdown_val: span.catVal=brands[0]
                            +dropdown_w('Бренд')
                                ul.cat_list.catList(data-default=brands[0])
                                    for item, i in brands
                                        - if (i > 0)
                                            li
                                                label.check_emul.check_v1
                                                    input.inp_hidden(type='checkbox')
                                                    span.check_text=item
        
                    li
                        .dropdown_holder.catParameter
                            .dropdown_btn.dropdownBtn
                                .dropdown_reset.catReset
                                .dropdown_caption Размер
                                .dropdown_val: span.catVal Любой
                            +dropdown_w('Размер')
                                ul.cat_list.catList(data-default='Любой')
                                    - var n = 0;
                                    while n < 14
                                        - var val = 86 + n++ * 6
                                        li
                                            label.check_emul.check_v1
                                                input.inp_hidden(type='checkbox' name=('size') value= val)
                                                span.check_text= 'рост ' + val + ' см, на ' + plural(n, 'год', 'года', 'лет', true)
        
                    li
                        .dropdown_holder.catParameter
                            .dropdown_btn.dropdownBtn
                                .dropdown_reset.catReset
                                .dropdown_caption Сезон
                                .dropdown_val: span.catVal=seasons[0]
                            +dropdown_w('Сезон')
                                ul.cat_list.catList(data-default=seasons[0])
                                    for item, i in seasons
                                        - if (i > 0)
                                            li
                                                label.check_emul.check_v1
                                                    input.inp_hidden(type='checkbox' name=('season') value= ['', 's', 'w', 'd'][i])
                                                    span.check_text=item
        
                    li
                        .dropdown_holder.catParameter
                            .dropdown_btn.dropdownBtn
                                .dropdown_reset.catReset
                                .dropdown_caption Цена
                                .dropdown_val: span.catVal Любая
                            .dropdown_w
                                .dropdown_caption 
                                    span Цена 
                                    span._cur  грн.
                                .cat_list.catList(data-default='Любая')
                                    ul.price_toddler_vals
                                        li
                                            .input_w: input.filterMin.f_input.input_v4(data-name='price_min' data-inputmask="'alias': 'decimal', 'groupSeparator': ' ', 'digitsOptional': true, 'autoGroup': true, 'prefix' : 'от ', 'suffix': ' ₴' ")
                                        li
                                            .input_w: input.filterMax.f_input.input_v4(data-name='price_max' data-inputmask="'alias': 'decimal', 'groupSeparator': ' ', 'digitsOptional': true, 'autoGroup': true, 'prefix' : 'до ', 'suffix': ' ₴' ")
                                    
                                    .toddler_v1.price_toddler_holder
                                        .priceToddler.price_toddler(data-toddler-min='0' data-toddler-max='50000')
        
                                ul.dropdown_controls.form_cell
                                    li
                                        a.btn_v1.blue_btn.apply_btn.catApply(href='#') Ok
                                    li
                                        a.gl_link.catReset.blue_link(href='#') Сбросить
        
                    //-li
                        .dropdown_holder.catParameter.dropdown_w_right
                            .dropdown_btn.dropdownBtn
                                .dropdown_reset.catReset
                                .dropdown_caption Цвет
                                .dropdown_val: span.catVal=colors[0]
                            +dropdown_w('Цвет')
                                ul.cat_list.catList(data-default=colors[0])
                                    for item, i in colors
                                        - if (i > 0)
                                            li
                                                label.check_emul.check_v1
                                                    input.inp_hidden(type='checkbox')
                                                    span.check_text=item
        
                ul.search_sort
                    li
                        label.check_v2.check_emul
                            input.inp_hidden.updateFilter(type='checkbox' name='in_stock')
                            span.check_text в наличии
                    li
                        label.check_v2.check_emul
                            input.inp_hidden.updateFilter(type='checkbox' name='is_hit')
                            span.check_text хит
                    li
                        span.fz_12 Сортировать по:
                        
                    li
                        input#price_sort.inp_hidden(type='text' name='price_desc' value='desc')
                        span.btn_v2.sort_btn.active.sortBtn(data-target='#price_sort')
                            span цене
                            span.i-sort-desc.sort_icon
        
                    //-li
                        a.btn_v2.sort_btn(href='#') скидке
                        
                    //-li
                        a.btn_v2.sort_btn(href='#') популярности
                
                .search_result_info
                    //-p.cool_text Показано 3 товара
            
                ul.q_search_results.filterResults
                    //-+loop_while(2)
                        li
                            +product_item(true)
                        li
                            +product_item(false)
            
mixin auth_forms(suffix, email)
    .popup_inner
        ul.tab_holder.tab_v2(id= 'auth_switcher' + suffix || '')
            li.ui-state-active: a.tab_link(href='#auth_tab_1' + suffix || ''): span Вход
            li: a.tab_link(href='#auth_tab_2' + suffix || ''): span Регистрация

        .tabBlock(data-tab-context='#auth_switcher' + suffix || '')
            .tabUnit(id= 'auth_tab_1' + suffix || '')
                .tab_content
                    form.authForm.validateMe(action='/login' method='POST')
                        .form_cell
                            input#auth_email.f_input.input_v2(placeholder='Email' name='email' class='validate[required, custom[email]]' value= email ? email : '')

                        .form_cell
                            input#auth_pass.f_input.input_v2(placeholder='пароль' name='password' class='validate[required, minSize[6]]')

                        .form_cell
                            label.check_emul.check_v1
                                input.inp_hidden(type='checkbox' name='remember')
                                span.check_text Запомнить на этом устройтсве

                        .form_row
                            .form_cell
                                button.btn_v1.blue_btn.order_btn Войти

                            .remember_check.form_cell
                                a.gl_link.cool_text.fz_13.fw_500.passRecoveryBtn(href='#') Забыли пароль?

                        //-.alter_auth
                            p Войти через:
                            ul.about_list
                                li
                                    a.about_link(href='#')
                                        span.i-v
                                li
                                    a.about_link(href='#')
                                        span.i-f
                                li
                                    a.about_link(href='#')
                                        span.i-t
                                li
                                    a.about_link(href='#')
                                        span.i-o
                                li
                                    a.about_link(href='/auth/google')
                                        span.i-g

            .tabUnit(id= 'auth_tab_2' + suffix || '' style='display:none')
                .tab_content
                    form.regForm.validateMe(action='/signup' method='POST')
                        .form_cell
                            input.f_input.input_v2(placeholder='Email' name='email' class='validate[required, custom[email]]')

                        .form_cell
                            input.f_input.input_v2(placeholder='пароль' name='password' class='validate[required, minSize[6]]')

                        .form_cell
                            button.btn_v1.blue_btn.order_btn Зарегистрироваться


mixin scripts(page_title, index, news, search, product, lk, cart, add)
    - if (!scripts_in_head)
        - if (no_min)
            | 
            | <!--build:js js/main.min.js -->
            script(src= use_slash + 'js/lib/jquery-1.12.1.min.js')
            script(src= use_slash + 'js/lib/jquery-ui-1.11.4.js')
            script(src= use_slash + 'js/lib/slick.js')
            script(src= use_slash + 'js/lib/jquery.validationEngine.js')
            script(src= use_slash + 'js/lib/jquery.validationEngine-ru.js')
            script(src= use_slash + 'js/lib/select2.js')
            //-script(src= use_slash 'js/lib/jquery.mousewheel.min.js')
            script(src= use_slash + 'js/lib/jquery.mCustomScrollbar.min.js')
            script(src= use_slash + 'js/lib/jquery.inputmask.bundle.js')
            script(src= use_slash + 'js/main.js')
            | 
            | <!--endbuild-->
        - else
            script(src= use_slash + 'js/main.min.js')
        
        - if (index)
            - if (no_min)
                | 
                | <!--build:js js/index.min.js -->
                script(src= use_slash + 'js/index.js')
                | 
                | <!--endbuild-->
            - else
                script(src= use_slash + 'js/index.min.js')
        - if (news)
            - if (no_min)
                | 
                | <!--build:js js/news.min.js -->
                script(src= use_slash + 'js/lib/imagesloaded.pkgd.min.js')
                script(src= use_slash + 'js/lib/isotope.pkgd.min.js')
                script(src= use_slash + 'js/lib/packery-mode.pkgd.js')
                script(src= use_slash + 'js/news.js')
                | 
                | <!--endbuild-->
            - else
                script(src= use_slash + 'js/news.min.js')
    
        - if (search)
            //-link(href='//cdnjs.cloudflare.com/ajax/libs/fotorama/4.6.4/fotorama.css' rel="stylesheet")
            //-script(src='//cdnjs.cloudflare.com/ajax/libs/fotorama/4.6.4/fotorama.js')
            - if (no_min)
                | 
                | <!--build:js js/search.min.js -->
                script(src= use_slash + 'js/lib/nouislider.min.js')
                script(src= use_slash + 'js/lib/fotorama.js')
                script(src= use_slash + 'js/search.js')
                | 
                | <!--endbuild-->
            - else
                script(src= use_slash + 'js/search.min.js')
    
        //- if (lk)
             - if (no_min)
                | 
                | <!--build:js js/lk.min.js -->
                script(src= use_slash 'js/lk.js')
                | 
                | <!--endbuild-->
             - else
                script(src= use_slash 'js/lk.min.js')
    
        - if (cart)
            - if (no_min)
                | 
                | <!--build:js js/cart.min.js -->
                script(src= use_slash + 'js/lib/jquery.inputmask.bundle.js')
                script(src= use_slash + 'js/cart.js')
                | 
                | <!--endbuild-->
            - else
                script(src= use_slash + 'js/cart.min.js')
            
        - if (add)
            - if (no_min)
                | 
                | <!--build:js js/add.min.js -->
                script(src= use_slash + 'js/add.js')
                | 
                | <!--endbuild-->
            - else
                script(src= use_slash + 'js/add.min.js')

mixin popups(no_auth)
    form.logoutForm.hide(action='/logout' method='POST')

    .popup_close_btn.popupClose
        
    #quick_search_popup.popup.popup_v4
        .q_search_block
            form.qSearchForm(action='/q_search' method='POST')
                input.f_input.input_v3.qSearchInput(placeholder='Найти товар' name='name')
                button.search_btn.aside_m_icon.i-baby-rattle
                .adv_search_box
                    a.gl_link(href= use_slash + 'search' + (dev ? '.html' : '')) Перейти к расширенному поиску
        
        .q_search_results_holder.mCSB: ul.searchResults.q_search_results
            //-+loop_while(7)
                li
                    .product_item
                        a.product_img(href= use_slash + 'product_58e95666d4a12e2c21c3d587' + (dev ? '.html' : ''))
                            img(src= use_slash + 'images/search_rslt_1.jpg')
                            .product_hit Хит продаж
                            .product_share_holder: .product_share - 30%
                        h3.product_caption Трикотажное платье  <br> с рисунком
                        .product_price
                            span.old_price 8449
                                span._cur  грн.
                            span.new_price 4069
                                span._cur  грн.
                    
    #review_popup.popup.popup_v5
        .popup_inner
            .prod_review 
                .prod_review_photos
                    h3.prod_name Топ и брючки тонкой вязки
                    .fotorama(data-thumbwidth=60, data-thumbheight=60, data-height=340, data-nav="thumbs", data-thumbmargin=3)
                        .prod_review_img.product_img(data-thumb='/images/preview_small_1.jpg')
                            img(src= use_slash + 'images/preview_main_1.jpg')
                            .product_hit Хит продаж
                        .prod_review_img.product_img(data-thumb='/images/preview_small_2.jpg')
                            img(src= use_slash + 'images/preview_main_1.jpg')
                            .product_hit Хит продаж
                        .prod_review_img.product_img(data-thumb='/images/preview_small_3.jpg')
                            img(src= use_slash + 'images/preview_main_1.jpg')
                            .product_hit Хит продаж

            +prod_review_info()

    #callback_popup.popup.popup_v2
        .popup_inner
            ul#callback_switcher.tab_holder.tab_v1
                li: a.tab_link(href='#callback_tab_1'): span Перезвоните мне
                li: a.tab_link(href='#callback_tab_2'): span Задать вопрос
                
            .tabBlock(data-tab-context='#callback_switcher')
                #callback_tab_1
                    .tab_content
                        form.callbackForm.validateMe(action='/question' method='POST')
                            .form_cell
                                input.f_input.input_v2(placeholder='Имя' name='name')
                                
                            .form_cell
                                input.f_input.input_v2(placeholder='Телефон' data-inputmask="'mask': '[+38] (099)-999-99-99', 'clearIncomplete' : true" class='validate[required]' name='phone')
                                
                            .form_cell
                                button.btn_v1.blue_btn.order_btn Отправить заявку
                                
                #callback_tab_2(style='display:none')
                    .tab_content
                        form.questionForm.validateMe(action='/question' method='POST')
                            .form_cell
                                input.f_input.input_v2(placeholder='Имя' name='name')
                                
                            .form_cell
                                input.f_input.input_v2(placeholder='Телефон' data-inputmask="'mask': '[+38] (099)-999-99-99', 'clearIncomplete' : true" class='validate[required]' name='phone')
                                
                            .form_cell
                                textarea.f_input.input_v2(placeholder='Вопрос' class='validate[required, minSize[10]]' name='question')
                                
                            .form_cell
                                button.btn_v1.blue_btn.order_btn Отправить вопрос
                                
    #fail_popup.popup.popup_v3.popup_fail
        .popup_inner.form_cell_v1
            .popup_caption Ошибка
            .popup_msg.failText Вы указали почту, которой нет.  <br>  Попробуйте еще раз
            
            .form_cell
                //-a.btn_v1.blue_btn.order_btn.mod_2(href='#') Попробовать еще раз
                a.gl_link.popupClose(href='#') Закрыть
                                                    
    #confirmation_popup.popup.popup_v3.popup_fail
        .popup_inner.form_cell_v1
            .popup_caption.confirmCaption Ошибка
            .popup_msg.confirmText Вы указали почту, которой нет.  <br>  Попробуйте еще раз
            
            .form_cell
                a.btn_v1.blue_btn.order_btn.mod_2.confirmAction(href='#') Продолжить
                a.gl_link.popupClose(href='#') Отмена
                    
    #success_popup.popup.popup_v3.popup_success
        .popup_inner.form_cell_v1
            .popup_caption Успех!
            .popup_msg.successText Новый пароль отправлен на вашу почту. Откройте письмо и пройдите по ссылке 
            
            .form_cell
                button.btn_v1.blue_btn.order_btn.mod_3.popupClose Закрыть

    #recovery_popup.popup.popup_v3
        .popup_inner
            .popup_caption Восстановление пароля
            form.recoveryForm.validateMe(action='/recovery' method='POST')
                .form_cell
                    input.f_input.input_v2(placeholder='Email' name='email' class='validate[required, custom[email]]')
                .form_row
                    .form_cell
                        button.btn_v1.blue_btn.order_btn.mod_2 Восстановить пароль
                        
                    .remember_check.form_cell
                        a.gl_link.cool_text.fz_13.fw_500.popupClose(href='#') Отмена

    - if (!no_auth)
        #auth_popup.popup.popup_v3
            +auth_forms('_p')
        
    #add2cart_popup.popup.popup_v5
        .popup_cart_title
            .popup_cart_caption.fz_18 Товар добавлен в корзину
            p 
                span Всего: 4 товар (ов) на сумму 1 401 069
                span._cur  грн.
        
        .popup_cart_body
            p С этим товаром покупают:
            
            ul.cart_items
                li
                    .product_item
                        a.product_img(href='product' + (dev ? '.html' : ''))
                            img(src= use_slash + 'images/fav_1.jpg')
                        h3.product_caption Трикотажное платье с рисунком
                        .product_price
                            span.new_price 200
                                span._cur  грн.
                                
                li
                    .product_item
                        a.product_img(href='product' + (dev ? '.html' : ''))
                            img(src= use_slash + 'images/fav_1.jpg')
                        h3.product_caption длинное название длинное название длинное название
                        .product_price
                            span.new_price 200
                                span._cur  грн.
                                
                li
                    .product_item
                        a.product_img(href='product' + (dev ? '.html' : ''))
                            img(src= use_slash + 'images/fav_1.jpg')
                        h3.product_caption ФУтболка
                        .product_price
                            span.new_price 200
                                span._cur  грн.
    .preloader
        